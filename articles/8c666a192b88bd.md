---
title: "Lit Protocolの技術的概要と価値"
emoji: "💨"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["ブロックチェーン", "Ethereum", "Solidity"]
published: false
publication_name: "moneyforward"
---

この記事は、Lit Protocolの仕組みや価値について調べたことをアウトプットしフィードバックを得ることで、その技術的な側面や実用性について理解を深めることを目的に書いています。
記事の内容に不備等あれば是非教えていただきたいです。

また、読んでいる方がLit Protocolについての理解を深め、ブロックチェーンにおけるデータプライバシーの保護やデータ管理の手法について考えるきっかけになれば幸いです。

## Lit Protocol とは？

https://litprotocol.com/

Lit Protocolは、暗号鍵ペアの作成と管理を分散して行うことで、条件付き暗号化やプログラムによる署名の実現を目的としたプロトコルです。分散型鍵管理ネットワークとして機能するLit Protocolは、集中型鍵保管サービスや他の鍵管理ソリューションの代わりとして利用できます。

ちなみにLit Protocolは、今月14日から東京で開催されるETHGlobal Tokyoのパートナーになっており、$5,000のprizeがあります。

https://ethglobal.com/events/tokyo

## Lit Protocolの価値

いくつかの技術要素により、以下の価値の実現が可能とされています。

- ブロックチェーン上に載せられない機密情報の安全な分散管理
- 誰も完全な秘密鍵を持たない状態でのプログラムによる署名を実現
- 鍵の所有権や利用権をNFTで証明することができ、権限の譲渡や制御がブロックチェーン上で簡単かつ安全に行える

従来の鍵管理プロトコルでは、鍵は一元的に管理されることが一般的でした。これにより、鍵の漏洩やセキュリティ侵害のリスクが高まります。Lit Protocolは、機密情報である鍵を分散管理することが可能で、これらのリスクを大幅に軽減できます。

Lit Protocolはブロックチェーン技術を活用せず、ブロックチェーンに依存しないミドルウェア層として機能します。各種ブロックチェーンとオフチェーンプラットフォーム間でデータを読み書きすることができ、条件付き復号化やプログラムによる署名を実現することができます。

また、従来の鍵管理手段では、鍵の所有権や利用権の証明や管理が煩雑であり、トラブルが発生しやすい状況でした。Lit Protocolでは、NFTを用いて鍵の所有権や利用権を証明し、ブロックチェーン上で権限の譲渡や制御が行えるため、効率的かつ透明な権限管理が可能です。

## Lit Protocolの主要技術
Lit Protocolはしきい値暗号技術とSEVと呼ばれる技術の組み合わせによって、堅牢で安全かつ汎用性の高いソリューションを実現しています。

### しきい値暗号
Lit Protocolはしきい値暗号技術を用いた分散型鍵管理ネットワークです。
しきい値暗号技術は秘密分散を実現する手段の一つで、秘密情報を複数の「シェア」とよばれる断片として分割し、分散させる仕組みです。
分散されたシェアの一定数以上が集まらない限り、元の秘密情報を復元することができません。

Lit Protocolでは分散鍵生成(DKG)と呼ばれるプロセスで、公開鍵と秘密鍵のシェアを生成し、各ノードに異なるシェアを保存します。

![公式ドキュメントより引用](https://developer.litprotocol.com/assets/images/networkOverview-de09858e8ee25cb4b1906d49730d7c75.png =400x)
*公式ドキュメントより引用*

これにより、単一のノードのみが鍵の利用権を持つことが出来ず、ある一定のしきい値に達する数のノードが強力することで鍵が利用できる状態を実現できます。
ちなみに、Lit Protocolはネットワークに参加するノードの2/3がしきい値に設定されています。

ノードがネットワークに参加したり離脱したりすると、プロアクティブ秘密分散と呼ばれるプロセスによって、シェアが再生成されます。

### SEV (Secure Encrypted Virtualization)
Lit Protocolは、セキュリティをさらに向上させるために、[AMDのSEV-SNP](https://www.amd.com/system/files/TechDocs/SEV-SNP-strengthening-vm-isolation-with-integrity-protection-and-more.pdf)をベアメタル実装としてノード運営者向けにハードウェアソリューションを構築しています。
SEVは、サーバ上で稼働するVMを独自の暗号鍵で保護する技術で、この技術により、ノードの操作はすべて安全なブラックボックス環境内で行われ、ノード運営者や外部のエージェントはノード内に保存されたシェアや計算に直接アクセスすることはできません。

ユーザーの操作で署名や復号化がなされる際は、各ノードは独立した暗号化されたチャンネルを介して通信します。これにより、シェアは再結合の瞬間にのみクライアント側で公開されます。
![](https://storage.googleapis.com/zenn-user-upload/2c09a01f57ba-20230404.png =350x)

## Lit Protocolはどのように機能するのか
### 分散型プログラム署名
Lit Protocolは、分散型Web上でプライベートデータの読み取りを可能にするアクセス制御機能と、データの書き込みを行うプログラム署名機能を提供します。プログラム署名機能には、プログラム可能なキーペア（PKP）とLitアクションという2つの関連サービスが含まれます。

これらの技術要素を組み合わせることで、Lit Protocolは高いセキュリティとプライバシー保護を提供し、従来の鍵管理ソリューションに対して優れた柔軟性と互換性を持つ鍵管理プロトコルとなっています。データの安全性やプライバシーの確保が求められる現代において、Lit Protocolは新たな可能性を切り拓く技術として注目されています。

### ブロックチェーン非依存のミドルウェア層
Lit Protocolは、ブロックチェーンに依存せず、複数のブロックチェーンやオフチェーンプラットフォーム間でデータの読み書きが可能なミドルウェア層として機能します。
ほとんどのEVMチェーン、Cosmosチェーン、およびSolanaエコシステムと互換性のある分散型アクセス制御プロトコルを提供しており、条件付き復号化やプログラムによる署名を、異なるプラットフォーム間で実現することが可能です。

コンセンサス、Litアクション（Javascriptによるスマートコントラクトで、オンまたはオフチェーンのデータを計算に利用できる）の実行に重要な役割を担っています。Litはブロックチェーンではなく、ブロックチェーンやその他の分散システム、ステートマシン間でデータの読み書きができるミドルウェアサービスと定義することができます。

## 利用例
さらに、Lit Protocolを実際に利用しているプロダクトを2つ紹介します。

### Patch Wallet
https://launch.mirror.xyz/Kwb5Cx_Uj0rrTtR-pnJT0WrVBYa_X-iVpEb1x7SSPNE

OAuth認証を使って秘密鍵の利用権を制御してるっぽい。認証周りはかなり自由度高そう

### gasless airdropper

https://youtu.be/jnWLUA8zZvo

- おそらく、ミント用のキーペアをLit protocol上で管理し、誰でもその鍵を使ってトランザクションが発行できるようにしている
  - ミントしかできないように権限を絞ってたりするのかな🤔
- EOAを用意して同じような体験を実現することは可能だが、中央集権的な管理が生まれる。Litを使うとほぼ永久的に動き続ける


他にも多くのユースケースが公式ドキュメントにて紹介されてます。
https://developer.litprotocol.com/usecases

## 課題と展望

## まとめ
