---
title: "gotipでリリース前のGoを使う"
emoji: "😎"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["go"]
published: false
---

本記事は[Go Advent Calendar 2021](https://qiita.com/advent-calendar/2021/go) 15日目の記事になります
去年はこんな記事を書きました

https://zenn.dev/uji/articles/f6ab9a06320294146733

来年の2月頃、Goの新バージョン1.18がリリースされる予定です
今回のリリースはGenericsやFuzzing test, Workspace modeなど新機能が複数追加される大幅なアップデートになっています

これらの機能はまだリリースされておりませんが、リリース前の機能を簡単に試すことができる仕組みがGoにはあります。

# ローカルで動かす

以下の手順で`gotip`コマンドをインストールすることで簡単にローカルで新しいGoを試せます

```
go install golang.org/dl/gotip@latest
gotip download
```

`gotip`を既にインストールしている場合は`gotip download`を実行することで最新の状態に更新することができます。

普段`go`コマンドを使うところを`gotip`に置き換えれば、最新の開発ブランチの環境でコマンドを実行することができます。
```sh:
gotip mod init example.com/m
```
などでgo.modファイルを作成すると`1.18`バージョンが指定されています(2021/12時点)

https://pkg.go.dev/golang.org/dl/gotip

## goplsを最新にする

go1.18で追加された構文をエディタで書いてみると、静的解析機能に怒られました
![](https://storage.googleapis.com/zenn-user-upload/3daa9a997a09-20211212.png)
これはエディタが利用しているgopls(Go公式のLanguage Server)がgo1.18に対応していないためです
goplsを使った補完や静的解析を有効にしたい場合は、goplsのmasterバージョンの用意が必要です

手順については公式のドキュメントに記述があります
https://github.com/golang/tools/blob/master/gopls/doc/advanced.md

ドキュメント通りにコマンドを実行することでmasterバージョンのgoplsが使えるようになります　

```sh:
# Create an empty go.mod file, only for tracking requirements.
cd $(mktemp -d)
go mod init gopls-unstable

# Use 'go get' to add requirements and to ensure they work together.
go get golang.org/x/tools/gopls@master golang.org/x/tools@master

# For go1.17 or older, the above `go get` command will build and
# install `gopls`. For go1.18+ or tip, run the following command to install
# using selected versions in go.mod.
go install golang.org/x/tools/gopls
```

https://twitter.com/uji_rb/status/1470021548363100161

# Gotip Playground

環境構築が面倒だという場合はgotipが動くGo Playground、Gotip Playgroundを使うのが良いです

https://gotipplay.golang.org/

シンタックスハイライトやコード補完など高度な機能はないですが、最低限の機能はあるので気軽に構文を試したい場合はオススメです

![](https://storage.googleapis.com/zenn-user-upload/b9af9d89415c-20211212.png)

年末はgotipでGenericsを先取りしちゃいましょう
